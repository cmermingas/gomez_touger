$.fn.randomize=function(d){var f=false,h=0,g=$(this),m=false;d=$.extend({numberOf:1,altText:[],cssPrefix:"",background:false,src:"",syncImages:false,linkTo:""},d);if(d.hasOwnProperty("altTags")){d.altText=d.altTags;delete d.altTags}function k(n){var o;if(typeof window.console!=="undefined"){switch(n){case"id":o='Please supply an "id" parameter.';break;case"src":o='Please supply a "src" parameter.';break}console.log("Error (Randomize): "+o)}}function a(o){var n;o=parseInt(o,10);do{n=Math.ceil(Math.random()*d.numberOf)}while(n===o);return n}function i(p,q,r){var o,n;if(r){o=new Date();o.setTime(o.getTime()+(r*24*60*60*1000));n="; expires="+o.toGMTString()}else{n=""}document.cookie=p+"="+q+n+"; path=/"}function j(o){var q=o+"=",n=document.cookie.split(";"),r,p;for(p=0;p<n.length;p++){r=n[p];while(r.charAt(0)===" "){r=r.substring(1,r.length)}if(r.indexOf(q)===0){return r.substring(q.length,r.length)}}return null}function c(o,n){return o.replace(/\d+(\.\w+)$/g,n+"$1")}function l(){var o=$(document.body),q,n=$.data(o,"jQueryRandomizeIndex"),p;if(!d.src){k("src");return false}if(typeof n==="undefined"){n=0}q="randomize_background_image_element"+n;f="randomizeBackground";if(g.attr("id")){f+=g.attr("id")}h=a(j(f));p=c(d.src,h);$("head").append('<!--[if lte IE 8]><style type="text/css">'+d.cssPrefix+"."+q+" { background-image: url("+p+'); }</style><![endif]--><style type="text/css" media="screen and (min-device-width:768px), projection">'+d.cssPrefix+"."+q+" { background-image: url("+p+"); }</style>");g.addClass(q);n++;return true}function e(){var q="",r="",s="",p="",o=$(document.body),n;if(!d.id){k("id");return false}f="randomizeImage"+d.src.replace(/.*\/([^\d]+)\d+(\.\w+)$/g,"$1");if(d.syncImages){n=o.data("randomImageIndex")}if(n){h=n}else{h=a(j(f));if(d.syncImages){o.data("randomImageIndex",h)}}r=c(d.src,h);s=d.id;if(d.altText[h-1]){p=d.altText[h-1]}q='<img id="'+s+'" src="'+r+'" alt="'+p+'" />';if(d.linkTo){if(d.linkTo.constructor.toString().indexOf("Array")>-1){if(d.linkTo[h-1]){q='<a id="'+s+'Link" href="'+d.linkTo[h-1]+'">'+q+"</a>"}}else{q='<a id="'+s+'Link" href="'+d.linkTo+'">'+q+"</a>"}}g.replaceWith(q);return true}function b(){f="randomizeParent";if(g.attr("id")){f+=g.attr("id")}d.numberOf=g.children().length;h=a(j(f));g.children(":eq("+(h-1)+")").show().siblings().hide();return true}if(d.background===true){m=l()}if(d.src!==""&&d.background!==true){m=e()}if(d.background!==true&&d.src===""){m=b()}if(m===true&&f){i(f,h,365)}};